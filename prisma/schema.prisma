generator client {
  provider = "prisma-client-js"
  output   = "../prisma-clients/mysql"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model cartitems {
  id        Int      @id @default(autoincrement())
  CartId    Int?
  ProductId Int?
  quantity  Int?
  createdAt DateTime @db.DateTime(0)
  updatedAt DateTime @db.DateTime(0)
  carts     carts?   @relation(fields: [CartId], references: [id], onDelete: Cascade, map: "cartitems_ibfk_1")

  @@index([CartId], map: "CartId")
}

model carts {
  id        Int         @id @default(autoincrement())
  UserId    Int?
  createdAt DateTime    @db.DateTime(0)
  updatedAt DateTime    @db.DateTime(0)
  cartitems cartitems[]
}

model cp_gun_datas {
  id                  Int       @id @default(autoincrement()) @db.UnsignedInt
  gunid               String    @db.VarChar(45)
  cpsn                String    @db.VarChar(45)
  connector_num       String    @db.VarChar(45)
  connector           String    @db.VarChar(45)
  last_heartbeat      String?   @db.VarChar(45)
  online              String?   @db.VarChar(45)
  brand               String?   @db.VarChar(45)
  loc                 String?   @db.Text
  station_name        String?   @db.VarChar(45)
  local_cp_num        String?   @db.VarChar(45)
  current_status      String?   @db.VarChar(45)
  charging_current_a  String?   @db.VarChar(45)
  charging_voltage    String?   @db.VarChar(45)
  charging_start_time DateTime? @db.DateTime(0)
  charging_end_time   DateTime? @db.DateTime(0)
}

model cp_logs {
  id        BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  cpid      String?   @db.VarChar(255)
  cpsn      String?   @db.VarChar(255)
  log       String?   @db.Text
  inout     String?   @db.VarChar(255)
  time      DateTime? @db.DateTime(0)
  createdAt DateTime  @db.DateTime(0)
  updatedAt DateTime  @db.DateTime(0)
}

model guns {
  id               Int        @id @default(autoincrement())
  connector        String?    @db.VarChar(255)
  cpid             String?    @db.VarChar(255)
  cpsn             String?    @db.VarChar(255)
  guns_status      String?    @db.VarChar(255)
  createdAt        DateTime   @db.DateTime(0)
  updatedAt        DateTime   @db.DateTime(0)
  guns_metervalue1 String?    @db.VarChar(255)
  guns_metervalue2 String?    @db.VarChar(255)
  guns_metervalue3 String?    @db.VarChar(255)
  guns_metervalue4 String?    @db.VarChar(255)
  guns_metervalue5 String?    @db.VarChar(255)
  guns_metervalue6 String?    @db.VarChar(255)
  guns_memo1       String?    @db.VarChar(255)
  guns_memo2       String?    @db.VarChar(255)
  transactionid    String?    @db.VarChar(255)
  acdc             guns_acdc? @default(AC)
  max_kw           Int?       @default(0)
}

model orderitems {
  id        Int      @id @default(autoincrement())
  OrderId   Int?
  ProductId Int?
  price     Int?
  quantity  Int?
  createdAt DateTime @db.DateTime(0)
  updatedAt DateTime @db.DateTime(0)
  orders    orders?  @relation(fields: [OrderId], references: [id], onDelete: Cascade, map: "orderitems_ibfk_1")

  @@index([OrderId], map: "OrderId")
}

model orders {
  id              Int          @id @default(autoincrement())
  name            String?      @db.VarChar(255)
  phone           String?      @db.VarChar(255)
  address         String?      @db.VarChar(255)
  amount          Int?
  sn              String?      @db.VarChar(255)
  shipping_status String?      @db.VarChar(255)
  payment_status  String?      @db.VarChar(255)
  UserId          Int?
  createdAt       DateTime     @db.DateTime(0)
  updatedAt       DateTime     @db.DateTime(0)
  orderitems      orderitems[]
  payments        payments[]
}

model payments {
  id              Int       @id @default(autoincrement())
  payment_method  String?   @db.VarChar(255)
  isSuccess       Boolean?
  failure_message String?   @db.Text
  payTime         DateTime? @db.DateTime(0)
  OrderId         Int?
  createdAt       DateTime  @db.DateTime(0)
  updatedAt       DateTime  @db.DateTime(0)
  orders          orders?   @relation(fields: [OrderId], references: [id], onDelete: NoAction, map: "payments_ibfk_1")

  @@index([OrderId], map: "OrderId")
}

model products {
  id          Int      @id @default(autoincrement())
  name        String?  @db.VarChar(255)
  description String?  @db.Text
  price       Int?
  image       String?  @db.VarChar(255)
  createdAt   DateTime @db.DateTime(0)
  updatedAt   DateTime @db.DateTime(0)
}

model sequelizemeta {
  name String @id @unique(map: "name") @db.VarChar(255)
}

model site_settings {
  id           Int      @id @default(autoincrement())
  ems_mode     String?  @default("static") @db.VarChar(255)
  max_power_kw Decimal? @default(480.00) @db.Decimal(10, 2)
  updatedAt    DateTime? @map("updated_at") @db.DateTime(0)
}

model users {
  id        Int      @id @default(autoincrement())
  email     String?  @db.VarChar(255)
  password  String?  @db.VarChar(255)
  role      String?  @db.VarChar(255)
  createdAt DateTime @db.DateTime(0)
  updatedAt DateTime @db.DateTime(0)
}

enum guns_acdc {
  AC
  DC
}
